{% extends "polls/base.html" %}

{% block title %}{{ display_ballot.ballot_name }} Polls Page{% endblock title %}

{% block content %}

{% load static %}
<link rel="stylesheet" href="{% static 'polls/display_ballot.css' %}">

<section>
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-8 mx-auto">
      {% if display_ballot.is_active %}
        {% if error_message %}
          <div class="alert alert-danger text-center">
            {{ error_message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </div>
        {% endif %}       
        <form action="{% url 'polls:vote' display_ballot.ballot_url %}" method="post" class="pb-4">
        {% csrf_token %}
          <h2 class="pt-3 text-center">{{ display_ballot.ballot_name }} Polls Page</h2>
          {% for cat in display_ballot.category_set.all %}
            <h3 class="pt-3">{{ cat }}</h3>
            {% for choice in cat.choice_set.all %}
            <div class="offset-1">
              <input class="lead" type="radio" name="{{ cat }}" id="{{ cat }}{{ forloop.counter }}" value="{{ choice.id }}" />
              <label class="lead" for="{{ cat }}{{ forloop.counter }}">{{ choice }}</label>
              <br>
            </div>
            {% endfor %}
          {% endfor %}
          {% if  user.is_authenticated and user.has_usable_password %}
            <p class="text-danger text-uppercase pt-3 pb-5"><b>Note: This is a Preview Page.</b></p>
          {% else %}
          <div class="mb-5 pt-5">
            <input class="btn btn-outline-dark" type="submit" value="Vote" />
            <p class="pb-5"></p>
          </div>
          {% endif %}
        </form>
      {% else %}
      <div class="py-5">
        <h1 class="text-center">Error 404</h1>
        <h2 class="text-center">Page not found </h2>
        <h2 class="text-center">The link you followed may be broken.</h2>
        <p class="text-center pt-5"><a class="text-dark" href="{% url 'polls:index' %}">Go Back Home</a></p>
      </div>
      {% endif %}
      </div>
    </div>
  </div>
</section>


{% endblock content %}



